<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Schedule a Call - Walden Ridge</title>
  <meta name="description" content="Schedule a call with Walden Ridge to discuss your hotel renovation or construction project.">
  <meta property="og:title" content="Schedule a Call — Walden Ridge">
  <meta property="og:description" content="Schedule a call to discuss your hotel renovation or construction project.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://waldenridgeco.com/schedule/">
  <meta property="og:image" content="https://waldenridgeco.com/og-image.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="theme-color" content="#f5f3f0">
  <link rel="canonical" href="https://waldenridgeco.com/schedule/">

  <link rel="icon" type="image/png" href="../favicon.png" />
  <link rel="apple-touch-icon" href="../apple-touch-icon.png">

  <!-- Preconnect: warm up CDN origin -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
  <link rel="dns-prefetch" href="https://script.google.com">

  <!-- Preload critical fonts + assets -->
  <link rel="preload" href="../assets/fonts/ibm-plex-sans-latin.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="../assets/fonts/cormorant-garamond-latin.woff2" as="font" type="font/woff2" crossorigin>
  <link rel="preload" href="../styles.css" as="style">

  <style>
    @font-face {
      font-family: "Cormorant Garamond";
      src: url("../assets/fonts/cormorant-garamond-latin.woff2") format("woff2");
      font-weight: 300 700;
      font-style: normal;
      font-display: swap;
    }
    @font-face {
      font-family: "IBM Plex Sans";
      src: url("../assets/fonts/ibm-plex-sans-latin.woff2") format("woff2");
      font-weight: 100 700;
      font-style: normal;
      font-display: swap;
    }
    @font-face {
      font-family: "JunicodeExpBold";
      src: url("../assets/fonts/Junicode-ExpBold.woff2") format("woff2");
      font-weight: 700;
      font-style: normal;
      font-display: swap;
    }
  </style>

  <script>
    document.documentElement.classList.add('js');

    if ('fonts' in document) {
      Promise.all([
        document.fonts.load('400 1em "IBM Plex Sans"'),
        document.fonts.load('600 1em "IBM Plex Sans"'),
        document.fonts.load('600 1em "Cormorant Garamond"'),
        document.fonts.load('700 1em JunicodeExpBold')
      ]).then(function() {
        document.documentElement.classList.add('fonts-loaded');
      }).catch(function() {
        document.documentElement.classList.add('fonts-loaded');
      });

      setTimeout(function() {
        document.documentElement.classList.add('fonts-loaded');
      }, 2000);
    } else {
      document.documentElement.classList.add('fonts-loaded');
    }
  </script>

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "Schedule a Call — Walden Ridge",
    "url": "https://waldenridgeco.com/schedule/",
    "description": "Schedule a call with Walden Ridge to discuss your hotel renovation or construction project.",
    "isPartOf": { "@type": "WebSite", "name": "Walden Ridge", "url": "https://waldenridgeco.com" }
  }
  </script>

  <link rel="stylesheet" href="../styles.css" />

  <!-- GSAP -->
  <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js" integrity="sha384-g4NTh/Iv5PPU4xPyhEWqPcwtNXOvdaDI8LLnyYfyNZOjKJeYQyjzQ9X5275eBjpt" crossorigin="anonymous"></script>

  <!-- Schedule styles in styles.css -->
</head>
<body class="page-schedule">

  <header class="site-header">
    <a href="../" class="logo-block">
      <h1 class="logo-wordmark">WALDEN RIDGE</h1>
      <p class="logo-subtitle">Hospitality Design &amp;&nbsp;Construction</p>
    </a>

    <nav class="main-nav" aria-label="Main">
      <a href="../our-story/">Our Story</a>
      <a href="../strategy/">Strategy</a>
      <a href="../portfolio/">Portfolio</a>
      <a href="../leadership/">Leadership</a>
    </nav>
  </header>

  <main id="main" class="container">
    <div class="reveal-overlay" aria-hidden="true"></div>

    <div class="schedule-intro">
      <h1>Schedule a&nbsp;Call</h1>
      <div class="page-metrics">15-minute intro &middot; <span class="nowrap">Mon&ndash;Fri</span> &middot; Eastern time</div>
    </div>

    <div class="schedule-shell">
      <p class="schedule-lede">A brief introductory call to assess fit and&nbsp;determine whether Walden Ridge can be helpful.</p>

      <p class="schedule-topics">Typical topics include hotel renovation or repositioning scope, brand requirements and&nbsp;timing considerations, capital constraints and&nbsp;execution risk, and&nbsp;advisory or delivery pathways. This call is exploratory and&nbsp;<span class="nowrap">non-binding</span>. If appropriate, next steps will be outlined following the discussion.</p>

      <div class="schedule-availability">
        <div class="schedule-availability-label">Availability (Eastern)</div>
        <div class="schedule-availability-time">Mon&ndash;Fri, 8:00&nbsp;AM&nbsp;&ndash;&nbsp;5:00&nbsp;PM &middot; <span class="nowrap">15-minute</span> calls</div>
      </div>

      <div class="schedule-card">
        <form id="wr-schedule" class="schedule-form" novalidate>
          <div style="position:absolute;left:-9999px" aria-hidden="true">
            <label>Leave blank <input type="text" name="website" tabindex="-1" autocomplete="off"></label>
          </div>

          <div class="schedule-grid">
            <div>
              <label>Your name <span class="req">*</span></label>
              <input name="name" type="text" autocomplete="name" required />
            </div>
            <div>
              <label>Your email <span class="req">*</span></label>
              <input name="email" type="email" autocomplete="email" required />
            </div>
            <div>
              <label>Phone</label>
              <input name="phone" type="tel" autocomplete="tel" />
            </div>
            <div>
              <label>Property / Project</label>
              <input name="property" type="text" />
            </div>

            <div class="full">
              <label>Select a date <span class="req">*</span></label>
              <div id="slot-picker" class="cal-picker">
                <div class="cal-nav">
                  <button type="button" id="cal-prev" class="btn btn-secondary">&larr;</button>
                  <div id="cal-title" class="cal-title"></div>
                  <button type="button" id="cal-next" class="btn btn-secondary">&rarr;</button>
                </div>

                <div class="cal-weekdays">
                  <div class="cal-weekday">Sun</div>
                  <div class="cal-weekday">Mon</div>
                  <div class="cal-weekday">Tue</div>
                  <div class="cal-weekday">Wed</div>
                  <div class="cal-weekday">Thu</div>
                  <div class="cal-weekday">Fri</div>
                  <div class="cal-weekday">Sat</div>
                </div>

                <div id="cal-grid" class="cal-days"></div>

                <div class="time-section">
                  <div class="time-label">Select a time (ET)</div>
                  <div id="time-grid" class="time-slots"></div>
                </div>
              </div>

              <input type="hidden" name="slot_date" id="slot_date" required />
              <input type="hidden" name="slot_time" id="slot_time" required />
            </div>

            <div class="full">
              <label>Notes</label>
              <textarea name="notes" placeholder="Any constraints, participants, or context"></textarea>
            </div>
          </div>

          <div class="schedule-actions">
            <button class="btn btn-primary" type="submit">Request a call</button>
            <a class="btn btn-secondary" id="mailto-fallback" href="#">Email instead</a>
            <span id="status" class="schedule-status"></span>
          </div>
        </form>

        <p class="schedule-confirm">We'll confirm a time window shortly.</p>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-content">
      <div class="footer-left">
        <a href="mailto:workwithus@waldenridgeco.com">workwithus@waldenridgeco.com</a>
        <div class="footer-location">Chattanooga, TN</div>
        <div class="footer-cta"><a href="../request/">Request Proposal</a></div>
      </div>
      <div class="footer-mark">
        <img src="../logo.png" alt="WR" class="footer-logo" width="91" height="72" loading="lazy">
        <div class="footer-mark-text">Since 2009</div>
      </div>
    </div>
  </footer>

  <script>
    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbxpqCxmIbQQGecvCclMtg6RZK-gPHLSGFeYh1-5xa3Qz72Ag8-vtT0cT6BspglWETTEeA/exec";
    const form = document.getElementById('wr-schedule');
    const statusEl = document.getElementById('status');
    const mailto = document.getElementById('mailto-fallback');

    const submitBtn = form ? form.querySelector('button[type="submit"]') : null;

    const calTitle = document.getElementById('cal-title');
    const calGrid = document.getElementById('cal-grid');
    const btnPrev = document.getElementById('cal-prev');
    const btnNext = document.getElementById('cal-next');
    const timeGrid = document.getElementById('time-grid');
    const slotDate = document.getElementById('slot_date');
    const slotTime = document.getElementById('slot_time');

    const TZ = 'America/New_York';
    const START_HOUR = 8;
    const END_HOUR = 17;
    const SLOT_MIN = 15;

    function setStatus(msg, kind){
      statusEl.textContent = msg || '';
      statusEl.classList.remove('status-ok','status-bad');
      if(kind==='ok') statusEl.classList.add('status-ok');
      if(kind==='bad') statusEl.classList.add('status-bad');
    }

    function fmtMonthTitle(d){
      return d.toLocaleString('en-US', { month: 'long', year: 'numeric' });
    }

    function ymd(d){
      const y = d.getFullYear();
      const m = String(d.getMonth()+1).padStart(2,'0');
      const day = String(d.getDate()).padStart(2,'0');
      return `${y}-${m}-${day}`;
    }

    function isWeekday(d){
      const day = d.getDay();
      return day >= 1 && day <= 5;
    }

    function buildSlots(){
      const out=[];
      for(let h=START_HOUR; h<END_HOUR; h++){
        for(let min=0; min<60; min+=SLOT_MIN){
          const hh = String(h).padStart(2,'0');
          const mm = String(min).padStart(2,'0');
          out.push(`${hh}:${mm}`);
        }
      }
      return out;
    }

    const SLOTS = buildSlots();

    function clearActive(container){
      container.querySelectorAll('[data-active="true"]').forEach(el => el.dataset.active = 'false');
    }

    function renderTimes(){
      timeGrid.innerHTML='';
      SLOTS.forEach(t => {
        const b=document.createElement('button');
        b.type='button';
        b.textContent=t;
        b.className='btn btn-secondary';
        b.style.borderRadius='12px';
        b.style.padding='12px 12px';
        b.style.justifyContent='center';
        b.dataset.value=t;
        b.dataset.active='false';
        b.addEventListener('click', () => {
          clearActive(timeGrid);
          b.dataset.active='true';
          slotTime.value=t;
          updateMailto();
        });
        timeGrid.appendChild(b);
      });
    }

    function renderCalendar(view){
      calTitle.textContent = fmtMonthTitle(view);
      calGrid.innerHTML='';

      const first = new Date(view.getFullYear(), view.getMonth(), 1);
      const startDow = first.getDay();
      const daysInMonth = new Date(view.getFullYear(), view.getMonth()+1, 0).getDate();

      for(let i=0;i<startDow;i++){
        const blank=document.createElement('div');
        calGrid.appendChild(blank);
      }

      const today = new Date();
      today.setHours(0,0,0,0);

      for(let day=1; day<=daysInMonth; day++){
        const d=new Date(view.getFullYear(), view.getMonth(), day);
        d.setHours(0,0,0,0);

        const b=document.createElement('button');
        b.type='button';
        b.textContent=String(day);
        b.style.border='1px solid var(--line-soft)';
        b.style.background='rgba(255,255,255,0.5)';
        b.style.borderRadius='999px';
        b.style.height='48px';
        b.style.width='48px';
        b.style.margin='0 auto';
        b.style.display='inline-flex';
        b.style.alignItems='center';
        b.style.justifyContent='center';
        b.style.cursor='pointer';

        const selectable = isWeekday(d) && d >= today;
        if(!selectable){
          b.style.opacity='0.35';
          b.style.cursor='not-allowed';
          b.disabled=true;
        }

        b.dataset.value=ymd(d);
        b.dataset.active='false';

        b.addEventListener('click', () => {
          clearActive(calGrid);
          b.dataset.active='true';
          slotDate.value=b.dataset.value;
          updateMailto();
        });

        calGrid.appendChild(b);
      }

      calGrid.querySelectorAll('button').forEach(btn => {
        btn.addEventListener('mouseenter', () => {
          if(btn.disabled) return;
          btn.style.borderColor='rgba(0,0,0,0.25)';
        });
        btn.addEventListener('mouseleave', () => {
          if(btn.dataset.active==='true') return;
          btn.style.borderColor='var(--line-soft)';
        });
      });
    }

    function applyActiveStyles(){
      calGrid.querySelectorAll('button').forEach(btn => {
        if(btn.dataset.active==='true'){
          btn.style.background='rgba(29, 62, 47, 0.10)';
          btn.style.borderColor='rgba(29, 62, 47, 0.35)';
        } else {
          btn.style.background='rgba(255,255,255,0.5)';
          btn.style.borderColor='var(--line-soft)';
        }
      });
      timeGrid.querySelectorAll('button').forEach(btn => {
        if(btn.dataset.active==='true'){
          btn.style.background='rgba(29, 62, 47, 0.10)';
          btn.style.borderColor='rgba(29, 62, 47, 0.35)';
        } else {
          btn.style.background='transparent';
          btn.style.borderColor='var(--line-soft)';
        }
      });
    }

    let view = new Date();
    view = new Date(view.getFullYear(), view.getMonth(), 1);

    btnPrev.addEventListener('click', () => {
      view = new Date(view.getFullYear(), view.getMonth()-1, 1);
      renderCalendar(view);
      applyActiveStyles();
    });
    btnNext.addEventListener('click', () => {
      view = new Date(view.getFullYear(), view.getMonth()+1, 1);
      renderCalendar(view);
      applyActiveStyles();
    });

    function collect(){
      const fd = new FormData(form);
      return Object.fromEntries(fd.entries());
    }

    function buildMailto(d){
      const subject = 'Walden Ridge | Initial Consultation';
      const when = (d.slot_date && d.slot_time) ? `${d.slot_date} ${d.slot_time} ET` : '';
      const body = [
        'Call request',
        '',
        `Name: ${d.name||''}`,
        `Email: ${d.email||''}`,
        `Phone: ${d.phone||''}`,
        `Property: ${d.property||''}`,
        when ? '' : '',
        when ? `Requested slot (ET): ${when}` : 'Requested slot (ET):',
        '',
        d.notes ? `Notes: ${d.notes}` : ''
      ].filter(Boolean).join('\n');
      return `mailto:workwithus@waldenridgeco.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
    }

    function updateMailto(){
      const d = collect();
      mailto.href = buildMailto(d);
      applyActiveStyles();
    }

    form.addEventListener('input', updateMailto);

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      if(submitBtn && submitBtn.disabled) return;
      // Honeypot check
      const hp = form.querySelector('[name="website"]');
      if(hp && hp.value) return;

      const d = collect();

      if(!d.name || !d.email || !d.slot_date || !d.slot_time){
        setStatus('Please select a date and time, and fill required fields.', 'bad');
        return;
      }
      if(submitBtn) submitBtn.disabled = true;

      if(!WEB_APP_URL || WEB_APP_URL.includes('__APPS_SCRIPT_WEBAPP_URL__')){
        setStatus('Scheduling endpoint not configured yet. Use "Email instead".', 'bad');
        return;
      }

      try{
        setStatus('Submitting\u2026', null);
        const res = await fetch(WEB_APP_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ kind: 'schedule_request', ...d, tz: TZ, duration_min: 15 })
        });
        const txt = await res.text();
        let j; try{ j = JSON.parse(txt); } catch { j = { ok:false, raw:txt }; }
        if(!res.ok || !j.ok){
          setStatus(j.error || 'Submit failed.', 'bad');
          return;
        }
        setStatus('Request received. We will confirm shortly.', 'ok');
        form.reset();
        slotDate.value='';
        slotTime.value='';
        renderCalendar(view);
        renderTimes();
        updateMailto();
      }catch(err){
        setStatus('Network error. Use "Email instead".', 'bad');
      }finally{
        if(submitBtn) submitBtn.disabled = false;
      }
    });

    // init
    renderCalendar(view);
    renderTimes();
    updateMailto();
  </script>

  <script>
    // Lightweight entrance animation - only on initial page load
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const navEntry = performance.getEntriesByType && performance.getEntriesByType('navigation')[0];
    const isInitialLoad = navEntry ? navEntry.type === 'navigate' : true;

    if (prefersReduced || !window.gsap || !isInitialLoad) {
      document.documentElement.classList.add('no-motion');
      document.querySelector('.reveal-overlay')?.remove();
    } else {
      const run = () => {
        const tl = gsap.timeline({
          defaults: { ease: 'power2.out', duration: 0.6 },
          onComplete: () => {
            document.querySelector('.reveal-overlay')?.remove();
          }
        });
        tl.to('.reveal-overlay', { autoAlpha: 0, duration: 0.4, ease: 'power2.inOut' }, 0)
          .from('.site-header', { autoAlpha: 0, y: -8, duration: 0.5 }, 0.1)
          .from('main', { autoAlpha: 0, y: 12, duration: 0.6 }, 0.15);
      };

      let ran = false;
      const safeRun = () => { if (ran) return; ran = true; run(); };

      if (document.documentElement.classList.contains('fonts-loaded')) {
        requestAnimationFrame(safeRun);
      } else {
        const checkFonts = setInterval(() => {
          if (document.documentElement.classList.contains('fonts-loaded')) {
            clearInterval(checkFonts);
            requestAnimationFrame(safeRun);
          }
        }, 50);
        setTimeout(safeRun, 800);
      }
    }
  </script>

</body>
</html>
